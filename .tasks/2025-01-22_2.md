# Context
Task file name: 2025-01-22_2.md
Created at: 2025-01-22_15:45:00
Created by: subhajlimanond
Main branch: integration-post
Task Branch: task/map-display-fix_2025-01-22_2
YOLO MODE: on

# Task Description
Fix two issues with the map display:
1. Only 11 posts are displayed instead of the expected 20 posts
2. Implement category-specific icon shapes:
   - Triangle for REQUEST_SUPPORT
   - Square for REQUEST_INFO
   - Circle for REPORT_INCIDENT
   - Hexa for SUGGESTION

# Project Overview
A social monitoring and automated response generation platform for severe water-related incidents such as flooding, drought, as well as other generic questions and requests for the Royal Irrigation Department (RID) of Thailand. The tech stacks and other conventions are specified in .cursorrules.

# Task Analysis
Purpose:
- Fix the discrepancy between fetched and displayed posts
- Implement proper category-specific icon shapes as specified
- Ensure all 20 posts are visible on the map
- Verify shape mapping matches requirements

Implementation Goals:
1. Debug post filtering/display logic
2. Implement shape-based markers
3. Verify all posts have coordinates
4. Test shape mapping for all categories

# Task Analysis Tree
```
frontend/
├── src/
│   ├── components/
│   │   ├── Map.tsx (Main map component)
│   │   └── map/
│   │       ├── styles.ts (Category colors and shapes)
│   │       └── utils.ts (Map helper functions)
│   └── types/
│       └── processed-post.ts (Data types)
backend/
└── src/
    ├── services/
    │   └── processed-post.service.ts (Database queries)
    └── types/
        └── processed-post.dto.ts (Data transfer objects)
```

# Steps to take
1. Analyze why only 11 posts are displayed
2. Check post coordinates and filtering
3. Implement shape-based markers
4. Test all category shapes
5. Verify 20 posts display

# Current execution step: 2

# Important Notes
- Backend logs show 20 posts are fetched
- Frontend displays only 11 posts
- Need to check for missing coordinates
- Verify shape implementation
- Test all category mappings

# Task Progress
[2025-01-22 15:45:00] Created and switched to task branch 'task/map-display-fix_2025-01-22_2'
[2025-01-22 16:15:00] Analyzed options for amphure and tumbon coordinate lookup:
- Compared Mapbox Geocoding vs Static Mapping approaches
- Mapbox Pros: Real-time accuracy, auto-updates
- Mapbox Cons: API costs, network dependency, latency
- Static Mapping Pros: Fast, offline, no costs
- Static Mapping Cons: Manual maintenance
- Decision pending on implementation approach

# Final Review
[To be filled after task completion] 